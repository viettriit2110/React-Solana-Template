{"ast":null,"code":"import { BaseMessageSignerWalletAdapter, scopePollingDetectionStrategy, WalletAccountError, WalletDisconnectionError, WalletNotConnectedError, WalletNotReadyError, WalletPublicKeyError, WalletReadyState, WalletSignMessageError, WalletSignTransactionError } from '@solana/wallet-adapter-base';\nimport { PublicKey } from '@solana/web3.js';\nimport bs58 from 'bs58';\nexport const Coin98WalletName = 'Coin98';\nexport class Coin98WalletAdapter extends BaseMessageSignerWalletAdapter {\n  constructor() {\n    let config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    super();\n    this.name = Coin98WalletName;\n    this.url = 'https://coin98.com';\n    this.icon = 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA3NiA3NSI+CiAgPGRlZnM+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9ImEiIHgxPSIxMDEuNjgxJSIgeDI9Ii0xLjU1NyUiIHkxPSIxNS4yNjglIiB5Mj0iODQuOTE3JSI+CiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiNGMUQ5NjEiLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjQ0RBMTQ2Ii8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogIDwvZGVmcz4KICA8ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgPHJlY3Qgd2lkdGg9Ijc1IiBoZWlnaHQ9Ijc1IiBmaWxsPSIjMDAwIiByeD0iMTYiLz4KICAgIDxwYXRoIGZpbGw9InVybCgjYSkiIGZpbGwtcnVsZT0ibm9uemVybyIgZD0iTTYxLjQ0IDBhMTMuNzE0IDEzLjcxNCAwIDAgMSA5LjY4IDQuMDEgMTMuNjYxIDEzLjY2MSAwIDAgMSA0LjAwOCA5LjY2OHY0Ny42NDZhMTMuNjYgMTMuNjYgMCAwIDEtNC4wMDcgOS42NjZBMTMuNzEzIDEzLjcxMyAwIDAgMSA2MS40NCA3NUgxMy42ODZhMTMuNzEzIDEzLjcxMyAwIDAgMS05LjY4LTQuMDFBMTMuNjYgMTMuNjYgMCAwIDEgMCA2MS4zMjRWMTMuNjc4YzAtMy42MjUgMS40NC03LjEwMiA0LjAwNy05LjY2N0ExMy43MTQgMTMuNzE0IDAgMCAxIDEzLjY4NyAwWk0yMC4wNjMgNDYuMjMxaC00LjgyNWExMC4wMzIgMTAuMDMyIDAgMCAwIDIuOTQ2IDcuMDg2IDEwLjA3IDEwLjA3IDAgMCAwIDcuMSAyLjk0MiAxMC4wNjUgMTAuMDY1IDAgMCAwIDcuMTA4LTIuOTM1IDEwLjAzIDEwLjAzIDAgMCAwIDIuOTQ2LTcuMDkzaC00LjgyNGE1LjIwNyA1LjIwNyAwIDAgMS0xLjUzIDMuNjg4IDUuMjI1IDUuMjI1IDAgMCAxLTMuNjk2IDEuNTI4IDUuMjM0IDUuMjM0IDAgMCAxLTMuNjk1LTEuNTI4IDUuMjEzIDUuMjEzIDAgMCAxLTEuNTMtMy42ODhaTTU0LjMzIDMzLjcxNmExMS43NjMgMTEuNzYzIDAgMCAwLTEyLjc5OSAyLjUzOEExMS42OTcgMTEuNjk3IDAgMCAwIDM4Ljk5IDQ5LjAzYTExLjcyMyAxMS43MjMgMCAwIDAgNC4zMjggNS4yNTkgMTEuNzU3IDExLjc1NyAwIDAgMCA2LjUyNiAxLjk3IDExLjc2NiAxMS43NjYgMCAwIDAgOC4yOS0zLjQzNSAxMS43MiAxMS43MiAwIDAgMCAzLjQ0Mi04LjI3NCAxMS43MDIgMTEuNzAyIDAgMCAwLTEuOTc1LTYuNTE0IDExLjczNiAxMS43MzYgMCAwIDAtNS4yNjktNC4zMlptLTQuNDg4IDMuOTJhNi45MzcgNi45MzcgMCAwIDEgNC45IDIuMDI1IDYuOTEgNi45MSAwIDAgMSAyLjAyOCA0Ljg5MiA2Ljg5NyA2Ljg5NyAwIDAgMS0xLjE3IDMuODM0IDYuOTMyIDYuOTMyIDAgMCAxLTEwLjY0MyAxLjA0MiA2LjkwMiA2LjkwMiAwIDAgMS0xLjUtNy41MjIgNi45MDkgNi45MDkgMCAwIDEgMi41NDQtMy4xIDYuOTI4IDYuOTI4IDAgMCAxIDMuODQxLTEuMTY3Wm0uMTcgNC41NTJhMi40MzEgMi40MzEgMCAwIDAtMi4yNDEgMS4xNTQgMi40MTggMi40MTggMCAwIDAtLjM1NiAxLjI1NyAyLjM5NSAyLjM5NSAwIDAgMCAxLjYxOSAyLjI5djEuNzUzaDEuNjE4di0xLjc1NGEyLjQyNyAyLjQyNyAwIDAgMCAxLjU5NC0xLjk1IDIuNDE4IDIuNDE4IDAgMCAwLTEtMi4zMSAyLjQzMSAyLjQzMSAwIDAgMC0xLjIzNC0uNDRabS0yMC4yMi0yMi41NTJhMTEuNzYyIDExLjc2MiAwIDAgMC0xMi43OTYgMi41MzEgMTEuNjk3IDExLjY5NyAwIDAgMC0yLjU1NCAxMi43NjkgMTEuNzIzIDExLjcyMyAwIDAgMCA0LjMyIDUuMjYyIDExLjc1NyAxMS43NTcgMCAwIDAgMTQuODI1LTEuNDQ2IDExLjcxNyAxMS43MTcgMCAwIDAgMy40NDUtOC4yODQgMTEuNzAzIDExLjcwMyAwIDAgMC0xLjk3NC02LjUxMiAxMS43MzYgMTEuNzM2IDAgMCAwLTUuMjY2LTQuMzJabS00LjUxIDMuOTE3YTYuOTQ1IDYuOTQ1IDAgMCAxIDQuODk3IDIuMDI5IDYuOTE4IDYuOTE4IDAgMCAxIDIuMDMyIDQuODg2IDYuOTA2IDYuOTA2IDAgMCAxLTEuMTY4IDMuODQyIDYuOTQgNi45NCAwIDAgMS0xMC42NiAxLjA0OCA2LjkxMSA2LjkxMSAwIDAgMS0xLjUtNy41MzYgNi45MTggNi45MTggMCAwIDEgMi41NS0zLjEwMyA2LjkzNyA2LjkzNyAwIDAgMSAzLjg1LTEuMTY2Wm0yNC41Ni00LjgxYTEwLjA1OSAxMC4wNTkgMCAwIDAtNy4xMDMgMi45NCAxMC4wMiAxMC4wMiAwIDAgMC0yLjk0IDcuMDkgOS45IDkuOSAwIDAgMCAxLjIzIDQuNzk1IDEzLjU3NSAxMy41NzUgMCAwIDEgNC4yMTQtMi4zMjIgNS4wODIgNS4wODIgMCAwIDEtLjYyNS0yLjQ3NyA1LjIwNiA1LjIwNiAwIDAgMSAxLjUwMy0zLjczNiA1LjIyMyA1LjIyMyAwIDAgMSAzLjcyMi0xLjU1NCA1LjIzNCA1LjIzNCAwIDAgMSAzLjcyIDEuNTU0IDUuMjEzIDUuMjEzIDAgMCAxIDEuNTA1IDMuNzM2IDUuMjc5IDUuMjc5IDAgMCAxLS42MjMgMi40NzMgMTMuNTc0IDEzLjU3NCAwIDAgMSA0LjIxMyAyLjMyMiA5LjkwMyA5LjkwMyAwIDAgMCAxLjIzLTQuNzk1IDEwLjAzMiAxMC4wMzIgMCAwIDAtMi45NDYtNy4wODYgMTAuMDcgMTAuMDcgMCAwIDAtNy4xLTIuOTRabS0yMy43NSA3Ljk5aC0xLjYxN3YxLjc1YTIuNDE5IDIuNDE5IDAgMCAwLTEuNTgyIDIuNjg3IDIuNDE0IDIuNDE0IDAgMCAwIDIuMzkgMi4wMDYgMi40NSAyLjQ1IDAgMCAwIDEuNTU1LS41NzQgMi40MTQgMi40MTQgMCAwIDAtLjc0Ni00LjExOXYtMS43NVoiLz4KICA8L2c+Cjwvc3ZnPgo=';\n    this.supportedTransactionVersions = null;\n    this._readyState = typeof window === 'undefined' || typeof document === 'undefined' ? WalletReadyState.Unsupported : WalletReadyState.NotDetected;\n    this._connecting = false;\n    this._wallet = null;\n    this._publicKey = null;\n    if (this._readyState !== WalletReadyState.Unsupported) {\n      scopePollingDetectionStrategy(() => {\n        if (window.coin98?.sol) {\n          this._readyState = WalletReadyState.Installed;\n          this.emit('readyStateChange', this._readyState);\n          return true;\n        }\n        return false;\n      });\n    }\n  }\n  get publicKey() {\n    return this._publicKey;\n  }\n  get connecting() {\n    return this._connecting;\n  }\n  get connected() {\n    return !!this._wallet?.isConnected();\n  }\n  get readyState() {\n    return this._readyState;\n  }\n  async connect() {\n    try {\n      if (this.connected || this.connecting) return;\n      if (this._readyState !== WalletReadyState.Installed) throw new WalletNotReadyError();\n      this._connecting = true;\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n      const wallet = window.coin98.sol;\n      let account;\n      try {\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        account = (await wallet.connect())[0];\n      } catch (error) {\n        throw new WalletAccountError(error?.message, error);\n      }\n      let publicKey;\n      try {\n        publicKey = new PublicKey(account);\n      } catch (error) {\n        throw new WalletPublicKeyError(error?.message, error);\n      }\n      this._wallet = wallet;\n      this._publicKey = publicKey;\n      this.emit('connect', publicKey);\n    } catch (error) {\n      this.emit('error', error);\n      throw error;\n    } finally {\n      this._connecting = false;\n    }\n  }\n  async disconnect() {\n    const wallet = this._wallet;\n    if (wallet) {\n      this._wallet = null;\n      this._publicKey = null;\n      try {\n        await wallet.disconnect();\n      } catch (error) {\n        this.emit('error', new WalletDisconnectionError(error?.message, error));\n      }\n    }\n    this.emit('disconnect');\n  }\n  async signTransaction(transaction) {\n    try {\n      const wallet = this._wallet;\n      if (!wallet) throw new WalletNotConnectedError();\n      try {\n        const response = await wallet.request({\n          method: 'sol_sign',\n          params: [transaction]\n        });\n        const publicKey = new PublicKey(response.publicKey);\n        const signature = bs58.decode(response.signature);\n        transaction.addSignature(publicKey, signature);\n        return transaction;\n      } catch (error) {\n        throw new WalletSignTransactionError(error?.message, error);\n      }\n    } catch (error) {\n      this.emit('error', error);\n      throw error;\n    }\n  }\n  async signAllTransactions(transactions) {\n    try {\n      const wallet = this._wallet;\n      if (!wallet) throw new WalletNotConnectedError();\n      try {\n        const response = await wallet.request({\n          method: 'sol_signAllTransactions',\n          params: [transactions]\n        });\n        const publicKey = new PublicKey(response.publicKey);\n        const signatures = response.signatures;\n        return transactions.map((transaction, index) => {\n          // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n          const signature = bs58.decode(signatures[index]);\n          transaction.addSignature(publicKey, signature);\n          return transaction;\n        });\n      } catch (error) {\n        throw new WalletSignTransactionError(error?.message, error);\n      }\n    } catch (error) {\n      this.emit('error', error);\n      throw error;\n    }\n  }\n  async signMessage(message) {\n    try {\n      const wallet = this._wallet;\n      if (!wallet) throw new WalletNotConnectedError();\n      try {\n        const response = await wallet.request({\n          method: 'sol_signMessage',\n          params: [message]\n        });\n        return bs58.decode(response.signature);\n      } catch (error) {\n        throw new WalletSignMessageError(error?.message, error);\n      }\n    } catch (error) {\n      this.emit('error', error);\n      throw error;\n    }\n  }\n}","map":{"version":3,"mappings":"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","names":["BaseMessageSignerWalletAdapter","scopePollingDetectionStrategy","WalletAccountError","WalletDisconnectionError","WalletNotConnectedError","WalletNotReadyError","WalletPublicKeyError","WalletReadyState","WalletSignMessageError","WalletSignTransactionError","PublicKey","bs58","Coin98WalletName","Coin98WalletAdapter","constructor","config","window","document","Unsupported","NotDetected","_connecting","_wallet","_publicKey","_readyState","coin98","sol","Installed","emit","publicKey","connecting","connected","isConnected","readyState","connect","wallet","account","error","message","disconnect","signTransaction","transaction","response","request","method","params","signature","decode","addSignature","signAllTransactions","transactions","signatures","map","index","signMessage"],"sourceRoot":"","sources":["../../src/adapter.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module","externalDependencies":[]}