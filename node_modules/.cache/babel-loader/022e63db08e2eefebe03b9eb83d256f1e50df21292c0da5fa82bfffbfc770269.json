{"ast":null,"code":"var _jsxFileName = \"/home/sotatek/Downloads/React-Solana-Template/src/view/index.tsx\",\n  _s = $RefreshSig$();\nimport IonIcon from '@sentre/antd-ionicon';\nimport { useConnection, useWallet } from '@solana/wallet-adapter-react';\nimport { WalletMultiButton } from '@solana/wallet-adapter-react-ui';\nimport { Keypair, SystemProgram } from '@solana/web3.js';\nimport * as Web3 from '@solana/web3.js';\nimport { Image, Col, Layout, Row, Space, Typography, Button } from 'antd';\nimport { useCallback, useEffect, useState } from 'react';\nimport logo from 'static/images/solanaLogo.svg';\nimport brand from 'static/images/solanaLogoMark.svg';\nimport './index.less';\nimport Splt from './splt';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction View() {\n  _s();\n  const {\n    publicKey,\n    sendTransaction\n  } = useWallet();\n  const {\n    connection\n  } = useConnection();\n  const [balance, setBalance] = useState(0);\n  const [loading, setLoading] = useState(false);\n  const getMyBalance = useCallback(async () => {\n    if (!publicKey) return setBalance(0);\n    const lamport = await connection.getBalance(publicKey);\n    return setBalance(lamport);\n  }, [connection, publicKey]);\n  useEffect(() => {\n    getMyBalance();\n  }, [getMyBalance]);\n  const airdrop = useCallback(async () => {\n    try {\n      setLoading(true);\n      if (publicKey) {\n        await connection.requestAirdrop(publicKey, 10 ** 9);\n        console.log(\"connection\", connection);\n      }\n      // alert('airdrop thanh cong')\n      setTimeout(() => getMyBalance(), 2000);\n    } catch (er) {\n      console.log(er.message);\n    } finally {\n      return setLoading(false);\n    }\n  }, [connection, publicKey, getMyBalance]);\n  const transfer = useCallback(async () => {\n    try {\n      setLoading(true);\n      if (publicKey) {\n        const instruction = SystemProgram.transfer({\n          fromPubkey: publicKey,\n          toPubkey: Keypair.generate().publicKey,\n          lamports: 10 ** 8\n        });\n        const transaction = new Web3.Transaction().add(instruction);\n        const {\n          context: {\n            slot: minContextSlot\n          },\n          value: {\n            blockhash,\n            lastValidBlockHeight\n          }\n        } = await connection.getLatestBlockhashAndContext();\n        const signature = await sendTransaction(transaction, connection, {\n          minContextSlot\n        });\n        // console.log('signature' ,signature);\n        await connection.confirmTransaction({\n          blockhash,\n          lastValidBlockHeight,\n          signature\n        });\n        // alert('https://explorer.solana.com/tx/'+ signature+'?cluster=devnet')\n        return getMyBalance();\n      }\n    } catch (er) {\n      console.log(er.message);\n    } finally {\n      return setLoading(false);\n    }\n  }, [connection, publicKey, getMyBalance]);\n  return /*#__PURE__*/_jsxDEV(Layout, {\n    className: \"container\",\n    children: /*#__PURE__*/_jsxDEV(Row, {\n      gutter: [24, 24],\n      children: [/*#__PURE__*/_jsxDEV(Col, {\n        span: 24,\n        children: /*#__PURE__*/_jsxDEV(Row, {\n          gutter: [24, 24],\n          children: [/*#__PURE__*/_jsxDEV(Col, {\n            flex: \"auto\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              alt: \"logo\",\n              src: brand,\n              height: 16\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 83,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            children: /*#__PURE__*/_jsxDEV(WalletMultiButton, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 86,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        span: 24,\n        style: {\n          textAlign: 'center'\n        },\n        children: /*#__PURE__*/_jsxDEV(Space, {\n          direction: \"vertical\",\n          size: 24,\n          children: [/*#__PURE__*/_jsxDEV(Image, {\n            src: logo,\n            preview: false,\n            width: 256\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Typography.Title, {\n            level: 1,\n            children: \"React + Solana = DApp\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Typography.Text, {\n            type: \"secondary\",\n            children: /*#__PURE__*/_jsxDEV(Space, {\n              children: [/*#__PURE__*/_jsxDEV(IonIcon, {\n                name: \"logo-react\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 96,\n                columnNumber: 33\n              }, this), \"+\", /*#__PURE__*/_jsxDEV(IonIcon, {\n                name: \"logo-solana\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 98,\n                columnNumber: 33\n              }, this), \"=\", /*#__PURE__*/_jsxDEV(IonIcon, {\n                name: \"rocket\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 100,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 95,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Typography.Title, {\n            children: [\"My balance : \", balance / 10 ** 9, \" SOL\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Space, {\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              type: \"primary\",\n              size: \"large\",\n              onClick: airdrop,\n              loading: loading,\n              children: \"Airdrop\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 105,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              type: \"primary\",\n              size: \"large\",\n              onClick: transfer,\n              loading: loading,\n              children: \"tranfer\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        span: 24,\n        style: {\n          padding: 20\n        },\n        children: /*#__PURE__*/_jsxDEV(Splt, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 9\n  }, this);\n}\n_s(View, \"PSSdAraIlb/Ii2euo/DR8bynVTI=\", false, function () {\n  return [useWallet, useConnection];\n});\n_c = View;\nexport default View;\nvar _c;\n$RefreshReg$(_c, \"View\");","map":{"version":3,"names":["IonIcon","useConnection","useWallet","WalletMultiButton","Keypair","SystemProgram","Web3","Image","Col","Layout","Row","Space","Typography","Button","useCallback","useEffect","useState","logo","brand","Splt","View","publicKey","sendTransaction","connection","balance","setBalance","loading","setLoading","getMyBalance","lamport","getBalance","airdrop","requestAirdrop","console","log","setTimeout","er","message","transfer","instruction","fromPubkey","toPubkey","generate","lamports","transaction","Transaction","add","context","slot","minContextSlot","value","blockhash","lastValidBlockHeight","getLatestBlockhashAndContext","signature","confirmTransaction","textAlign","padding"],"sources":["/home/sotatek/Downloads/React-Solana-Template/src/view/index.tsx"],"sourcesContent":["import IonIcon from '@sentre/antd-ionicon'\nimport { useConnection, useWallet } from '@solana/wallet-adapter-react'\nimport { WalletMultiButton } from '@solana/wallet-adapter-react-ui'\nimport {Keypair, SystemProgram } from '@solana/web3.js'\nimport * as Web3 from '@solana/web3.js';\nimport { Image, Col, Layout, Row, Space, Typography, Button } from 'antd'\nimport { useCallback, useEffect, useState } from 'react'\n\nimport logo from 'static/images/solanaLogo.svg'\nimport brand from 'static/images/solanaLogoMark.svg'\nimport './index.less'\nimport Splt from './splt';\n\n\nfunction View() {\n    const {publicKey, sendTransaction} = useWallet()\n    const {connection } = useConnection()\n    const [balance, setBalance] = useState(0)\n    const [loading, setLoading] = useState(false)\n\n    const getMyBalance = useCallback(async()=>{\n        if(!publicKey)\n            return setBalance(0)\n        const lamport = await connection.getBalance(publicKey)\n        return setBalance(lamport)\n    },[connection,publicKey]);\n\n    useEffect(()=> {\n        getMyBalance()\n    },[getMyBalance])\n\n    const airdrop = useCallback(async () =>{\n        try {\n            setLoading(true)\n            if(publicKey){\n                await connection.requestAirdrop(publicKey,10**9);\n                console.log(\"connection\",connection)\n            }\n            // alert('airdrop thanh cong')\n            setTimeout(() => getMyBalance(), 2000);\n        } catch (er: any) {\n            console.log(er.message)\n        }finally{\n            return setLoading(false)\n        }\n       \n    }, [connection, publicKey,getMyBalance])\n\n    const transfer = useCallback(async () =>{\n        try {\n            setLoading(true)\n            if(publicKey){\n                const instruction = SystemProgram.transfer({\n                    fromPubkey: publicKey,\n                    toPubkey: Keypair.generate().publicKey,\n                    lamports: 10**8,\n                });\n                const transaction = new Web3.Transaction().add(instruction);\n                const {\n                    context: { slot: minContextSlot },\n                    value: { blockhash, lastValidBlockHeight }\n                } = await connection.getLatestBlockhashAndContext();\n        \n                const signature = await sendTransaction(transaction, connection, { minContextSlot });\n                // console.log('signature' ,signature);\n                await connection.confirmTransaction({ blockhash, lastValidBlockHeight, signature });\n                // alert('https://explorer.solana.com/tx/'+ signature+'?cluster=devnet')\n                return getMyBalance()\n            }\n        } catch (er: any) {\n            console.log(er.message)\n        }finally{\n            return setLoading(false)\n        }\n       \n    }, [connection, publicKey,getMyBalance])\n    return (\n        <Layout className=\"container\">\n            <Row gutter={[24, 24]}>\n                <Col span={24}>\n                    <Row gutter={[24, 24]}>\n                        <Col flex=\"auto\">\n                            <img alt='logo' src={brand} height={16} />\n                        </Col>\n                        <Col>\n                        <WalletMultiButton/>\n                        </Col>\n                    </Row>\n                </Col>\n                <Col span={24} style={{ textAlign: 'center' }}>\n                    <Space direction=\"vertical\" size={24}>\n                        <Image src={logo} preview={false} width={256} />\n                        <Typography.Title level={1}>React + Solana = DApp</Typography.Title>\n                        <Typography.Text type=\"secondary\">\n                            <Space>\n                                <IonIcon name=\"logo-react\" />\n                                +\n                                <IonIcon name=\"logo-solana\" />\n                                =\n                                <IonIcon name=\"rocket\" />\n                            </Space>\n                        </Typography.Text>\n                        <Typography.Title>My balance : {balance/ 10**9} SOL</Typography.Title>\n                        <Space>\n                            <Button type=\"primary\" size=\"large\" onClick={airdrop} loading = {loading}>\n                                Airdrop\n                            </Button>\n                            <Button type=\"primary\" size=\"large\" onClick={transfer} loading = {loading}>\n                                tranfer\n                            </Button>\n                        </Space>\n                    </Space>\n                </Col>\n                <Col span= {24} style={{padding:20}} >\n                    <Splt/>\n                </Col>\n            </Row>\n        </Layout>\n    )\n}\n\nexport default View\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}