{"ast":null,"code":"import { BaseMessageSignerWalletAdapter, scopePollingDetectionStrategy, WalletAccountError, WalletDisconnectionError, WalletNotConnectedError, WalletNotReadyError, WalletPublicKeyError, WalletReadyState, WalletSignMessageError, WalletSignTransactionError } from '@solana/wallet-adapter-base';\nimport { PublicKey } from '@solana/web3.js';\nexport const OntoWalletName = 'ONTO';\nexport class OntoWalletAdapter extends BaseMessageSignerWalletAdapter {\n  constructor() {\n    let config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    super();\n    this.name = OntoWalletName;\n    this.url = 'https://onto.app';\n    this.icon = 'data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyODggMjg4Ij4KICA8dGl0bGU+T05UTyBMT0dPXzI4OHgyODg8L3RpdGxlPgogIDxnIGlkPSJMT0dPIj4KICAgIDxwYXRoIGlkPSLlvaLnirbnu5PlkIgiIGQ9Ik0zMCwxMS4xNSw3MS4xOSw1Mi4zMkExMTUsMTE1LDAsMCwxLDI1OCwxMzguNjdMMjU4LDE0MlYyNzYuODVsLTQxLjE5LTQxLjE2QTExNSwxMTUsMCwwLDEsMzAuMDUsMTQ5LjM0TDMwLDE0NlptMjguMTcsNjhWMTQ2YTg2Ljc5LDg2Ljc5LDAsMCwwLDEzNS4xNSw3MmwyLjIzLTEuNTVMNjMuNjcsODQuNjVaTTk0LjY4LDcwbC0yLjIzLDEuNTVMMjI0LjMzLDIwMy4zNmw1LjUsNS41VjE0MkE4Ni43OSw4Ni43OSwwLDAsMCw5NC42OCw3MFoiLz4KICA8L2c+Cjwvc3ZnPg==';\n    this.supportedTransactionVersions = null;\n    this._readyState = typeof window === 'undefined' || typeof document === 'undefined' ? WalletReadyState.Unsupported : WalletReadyState.NotDetected;\n    this._connecting = false;\n    this._wallet = null;\n    this._publicKey = null;\n    if (this._readyState !== WalletReadyState.Unsupported) {\n      scopePollingDetectionStrategy(() => {\n        if (window.onto?.solana?.isONTO) {\n          this._readyState = WalletReadyState.Installed;\n          this.emit('readyStateChange', this._readyState);\n          return true;\n        }\n        return false;\n      });\n    }\n  }\n  get publicKey() {\n    return this._publicKey;\n  }\n  get connecting() {\n    return this._connecting;\n  }\n  get connected() {\n    return !!this._wallet?.isConnected;\n  }\n  get readyState() {\n    return this._readyState;\n  }\n  async connect() {\n    try {\n      if (this.connected || this.connecting) return;\n      if (this._readyState !== WalletReadyState.Installed) throw new WalletNotReadyError();\n      this._connecting = true;\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n      const wallet = window.onto.solana;\n      let account;\n      try {\n        account = await wallet.getAccount();\n      } catch (error) {\n        throw new WalletAccountError(error?.message, error);\n      }\n      let publicKey;\n      try {\n        publicKey = new PublicKey(account);\n      } catch (error) {\n        throw new WalletPublicKeyError(error?.message, error);\n      }\n      this._wallet = wallet;\n      this._publicKey = publicKey;\n      this.emit('connect', publicKey);\n    } catch (error) {\n      this.emit('error', error);\n      throw error;\n    } finally {\n      this._connecting = false;\n    }\n  }\n  async disconnect() {\n    const wallet = this._wallet;\n    if (wallet) {\n      this._wallet = null;\n      this._publicKey = null;\n      try {\n        await wallet.disconnect();\n      } catch (error) {\n        this.emit('error', new WalletDisconnectionError(error?.message, error));\n      }\n    }\n    this.emit('disconnect');\n  }\n  async signTransaction(transaction) {\n    try {\n      const wallet = this._wallet;\n      if (!wallet) throw new WalletNotConnectedError();\n      try {\n        return (await wallet.signTransaction(transaction)) || transaction;\n      } catch (error) {\n        throw new WalletSignTransactionError(error?.message, error);\n      }\n    } catch (error) {\n      this.emit('error', error);\n      throw error;\n    }\n  }\n  async signAllTransactions(transactions) {\n    try {\n      const wallet = this._wallet;\n      if (!wallet) throw new WalletNotConnectedError();\n      try {\n        return (await wallet.signAllTransactions(transactions)) || transactions;\n      } catch (error) {\n        throw new WalletSignTransactionError(error?.message, error);\n      }\n    } catch (error) {\n      this.emit('error', error);\n      throw error;\n    }\n  }\n  async signMessage(message) {\n    try {\n      const wallet = this._wallet;\n      if (!wallet) throw new WalletNotConnectedError();\n      try {\n        const {\n          signature\n        } = await wallet.signMessage(message);\n        return signature;\n      } catch (error) {\n        throw new WalletSignMessageError(error?.message, error);\n      }\n    } catch (error) {\n      this.emit('error', error);\n      throw error;\n    }\n  }\n}","map":{"version":3,"mappings":"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","names":["BaseMessageSignerWalletAdapter","scopePollingDetectionStrategy","WalletAccountError","WalletDisconnectionError","WalletNotConnectedError","WalletNotReadyError","WalletPublicKeyError","WalletReadyState","WalletSignMessageError","WalletSignTransactionError","PublicKey","OntoWalletName","OntoWalletAdapter","constructor","config","window","document","Unsupported","NotDetected","_connecting","_wallet","_publicKey","_readyState","onto","solana","isONTO","Installed","emit","publicKey","connecting","connected","isConnected","readyState","connect","wallet","account","getAccount","error","message","disconnect","signTransaction","transaction","signAllTransactions","transactions","signMessage","signature"],"sourceRoot":"","sources":["../../src/adapter.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module","externalDependencies":[]}