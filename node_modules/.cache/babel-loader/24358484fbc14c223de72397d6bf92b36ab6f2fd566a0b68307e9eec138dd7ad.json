{"ast":null,"code":"import { BaseMessageSignerWalletAdapter, scopePollingDetectionStrategy, WalletAccountError, WalletConnectionError, WalletDisconnectedError, WalletDisconnectionError, WalletNotConnectedError, WalletNotReadyError, WalletPublicKeyError, WalletReadyState, WalletSendTransactionError, WalletSignMessageError, WalletSignTransactionError } from '@solana/wallet-adapter-base';\nimport { PublicKey } from '@solana/web3.js';\nexport const BackpackWalletName = 'Backpack';\nexport class BackpackWalletAdapter extends BaseMessageSignerWalletAdapter {\n  constructor() {\n    let config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    super();\n    this.name = BackpackWalletName;\n    this.url = 'https://backpack.app';\n    this.icon = 'data:image/png;base64,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';\n    this.supportedTransactionVersions = null;\n    this._readyState = typeof window === 'undefined' || typeof document === 'undefined' ? WalletReadyState.Unsupported : WalletReadyState.NotDetected;\n    this._disconnected = () => {\n      const wallet = this._wallet;\n      if (wallet) {\n        wallet.off('disconnect', this._disconnected);\n        this._wallet = null;\n        this._publicKey = null;\n        this.emit('error', new WalletDisconnectedError());\n        this.emit('disconnect');\n      }\n    };\n    this._connecting = false;\n    this._wallet = null;\n    this._publicKey = null;\n    if (this._readyState !== WalletReadyState.Unsupported) {\n      scopePollingDetectionStrategy(() => {\n        if (window.backpack?.isBackpack) {\n          this._readyState = WalletReadyState.Installed;\n          this.emit('readyStateChange', this._readyState);\n          return true;\n        }\n        return false;\n      });\n    }\n  }\n  get publicKey() {\n    return this._publicKey;\n  }\n  get connecting() {\n    return this._connecting;\n  }\n  get connected() {\n    return !!this._wallet?.isConnected;\n  }\n  get readyState() {\n    return this._readyState;\n  }\n  async connect() {\n    try {\n      if (this.connected || this.connecting) return;\n      if (this._readyState !== WalletReadyState.Installed) throw new WalletNotReadyError();\n      this._connecting = true;\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n      const wallet = window.backpack;\n      try {\n        await wallet.connect();\n      } catch (error) {\n        throw new WalletConnectionError(error?.message, error);\n      }\n      if (!wallet.publicKey) throw new WalletAccountError();\n      let publicKey;\n      try {\n        publicKey = new PublicKey(wallet.publicKey.toBytes());\n      } catch (error) {\n        throw new WalletPublicKeyError(error?.message, error);\n      }\n      wallet.on('disconnect', this._disconnected);\n      this._wallet = wallet;\n      this._publicKey = publicKey;\n      this.emit('connect', publicKey);\n    } catch (error) {\n      this.emit('error', error);\n      throw error;\n    } finally {\n      this._connecting = false;\n    }\n  }\n  async disconnect() {\n    const wallet = this._wallet;\n    if (wallet) {\n      wallet.off('disconnect', this._disconnected);\n      this._wallet = null;\n      this._publicKey = null;\n      try {\n        await wallet.disconnect();\n      } catch (error) {\n        this.emit('error', new WalletDisconnectionError(error?.message, error));\n      }\n    }\n    this.emit('disconnect');\n  }\n  async sendTransaction(transaction, connection) {\n    let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    try {\n      const wallet = this._wallet;\n      if (!wallet) throw new WalletNotConnectedError();\n      const {\n        signers,\n        ...sendOptions\n      } = options;\n      try {\n        return await wallet.send(transaction, signers, sendOptions, connection, this.publicKey);\n      } catch (error) {\n        throw new WalletSendTransactionError(error?.message, error);\n      }\n    } catch (error) {\n      this.emit('error', error);\n      throw error;\n    }\n  }\n  async signTransaction(transaction) {\n    try {\n      const wallet = this._wallet;\n      if (!wallet) throw new WalletNotConnectedError();\n      try {\n        return await wallet.signTransaction(transaction, this.publicKey);\n      } catch (error) {\n        throw new WalletSignTransactionError(error?.message, error);\n      }\n    } catch (error) {\n      this.emit('error', error);\n      throw error;\n    }\n  }\n  async signAllTransactions(transactions) {\n    try {\n      const wallet = this._wallet;\n      if (!wallet) throw new WalletNotConnectedError();\n      try {\n        return await wallet.signAllTransactions(transactions, this.publicKey);\n      } catch (error) {\n        throw new WalletSignTransactionError(error?.message, error);\n      }\n    } catch (error) {\n      this.emit('error', error);\n      throw error;\n    }\n  }\n  async signMessage(message) {\n    try {\n      const wallet = this._wallet;\n      if (!wallet) throw new WalletNotConnectedError();\n      try {\n        return await wallet.signMessage(message, this.publicKey);\n      } catch (error) {\n        throw new WalletSignMessageError(error?.message, error);\n      }\n    } catch (error) {\n      this.emit('error', error);\n      throw error;\n    }\n  }\n}","map":{"version":3,"mappings":"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","names":["BaseMessageSignerWalletAdapter","scopePollingDetectionStrategy","WalletAccountError","WalletConnectionError","WalletDisconnectedError","WalletDisconnectionError","WalletNotConnectedError","WalletNotReadyError","WalletPublicKeyError","WalletReadyState","WalletSendTransactionError","WalletSignMessageError","WalletSignTransactionError","PublicKey","BackpackWalletName","BackpackWalletAdapter","constructor","config","window","document","Unsupported","NotDetected","wallet","_wallet","off","_disconnected","_publicKey","emit","_connecting","_readyState","backpack","isBackpack","Installed","publicKey","connecting","connected","isConnected","readyState","connect","error","message","toBytes","on","disconnect","sendTransaction","transaction","connection","options","signers","sendOptions","send","signTransaction","signAllTransactions","transactions","signMessage"],"sourceRoot":"","sources":["../../src/adapter.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module","externalDependencies":[]}