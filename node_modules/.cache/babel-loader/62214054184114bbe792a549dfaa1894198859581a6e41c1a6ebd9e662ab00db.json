{"ast":null,"code":"import { BaseMessageSignerWalletAdapter, scopePollingDetectionStrategy, WalletAccountError, WalletConnectionError, WalletDisconnectedError, WalletNotConnectedError, WalletNotReadyError, WalletPublicKeyError, WalletReadyState, WalletSignMessageError, WalletSignTransactionError } from '@solana/wallet-adapter-base';\nimport { PublicKey } from '@solana/web3.js';\nexport const HuobiWalletName = 'HuobiWallet';\nexport class HuobiWalletAdapter extends BaseMessageSignerWalletAdapter {\n  constructor() {\n    let config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    super();\n    this.name = HuobiWalletName;\n    this.url = 'https://www.huobiwallet.io';\n    this.icon = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjI0IiBoZWlnaHQ9IjIyNCIgdmlld0JveD0iMCAwIDIyNCAyMjQiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMCAwTDIyNCAwVjIyNEgwTDAgMFoiIGZpbGw9IiMyMTU3RTIiLz4KPHBhdGggZD0iTTEzMS4wNTkgODEuMTc3MUMxMzEuMDU5IDU3Ljc1MzEgMTE5LjQ1OCAzNy42MzE1IDExMC42MjUgMzEuMDcyOEMxMTAuNjI1IDMxLjA3MjggMTA5Ljk1MyAzMC43MDQyIDExMCAzMS42MjU4VjMxLjYyNThDMTA5LjI2NSA3Ni44MzAzIDg1Ljc2NzIgODkuMDg3NSA3Mi44MzggMTA1LjU4NEM0My4wMjQxIDE0My42NzcgNzAuNzU4NyAxODUuNDU2IDk4Ljk5MzUgMTkzLjEzNkMxMTQuNzk5IDE5Ny40NTIgOTUuMzUwOCAxODUuNDU2IDkyLjg0OTQgMTYwLjIzNUM4OS44MDA3IDEyOS43NDUgMTMxLjA1OSAxMDYuNDQ0IDEzMS4wNTkgODEuMTc3MVoiIGZpbGw9InVybCgjcGFpbnQwX2xpbmVhcl8xMTAxXzEyNSkiLz4KPHBhdGggZD0iTTE0My41OTcgOTYuMzE3NEMxNDMuNDA5IDk2LjE5NDMgMTQzLjE1OCA5Ni4xMDIgMTQyLjk4NiA5Ni4zOTQzQzE0Mi40ODQgMTAyLjEwMiAxMzYuNTYgMTE0LjI4NiAxMjkuMDM3IDEyNS40ODZDMTAzLjU1MiAxNjMuNDU1IDExOC4wNjUgMTgxLjc2MiAxMjYuMjQ3IDE5MS42MzlDMTMwLjk0OSAxOTcuMzQ3IDEyNi4yNDcgMTkxLjYzOSAxMzguMDk2IDE4NS44MDhDMTUyLjczNSAxNzcuMDkyIDE2Mi4yMzQgMTYyLjAyIDE2My42NDMgMTQ1LjI3QzE2NS4yMzMgMTI2Ljc1OCAxNTcuNzk4IDEwOC42IDE0My41OTcgOTYuMzE3NFoiIGZpbGw9InVybCgjcGFpbnQxX2xpbmVhcl8xMTAxXzEyNSkiLz4KPGRlZnM+CjxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQwX2xpbmVhcl8xMTAxXzEyNSIgeDE9IjEyMi40MDEiIHkxPSIyMDkuMjk1IiB4Mj0iMTc4LjY2MiIgeTI9IjExMC40NDciIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KPHN0b3Agc3RvcC1jb2xvcj0iI0Y3RjZGRiIvPgo8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IndoaXRlIi8+CjwvbGluZWFyR3JhZGllbnQ+CjxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQxX2xpbmVhcl8xMTAxXzEyNSIgeDE9IjE1Ny44NjEiIHkxPSIyMDMuMTc3IiB4Mj0iMTg5LjAxNCIgeTI9IjE0MC4wMjIiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KPHN0b3Agc3RvcC1jb2xvcj0iI0Y3RjZGRiIvPgo8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IndoaXRlIi8+CjwvbGluZWFyR3JhZGllbnQ+CjwvZGVmcz4KPC9zdmc+Cg==';\n    this.supportedTransactionVersions = null;\n    this._readyState = typeof window === 'undefined' || typeof document === 'undefined' ? WalletReadyState.Unsupported : WalletReadyState.NotDetected;\n    this._disconnected = () => {\n      const wallet = this._wallet;\n      if (wallet) {\n        wallet.off('disconnect', this._disconnected);\n        this._wallet = null;\n        this._publicKey = null;\n        this.emit('error', new WalletDisconnectedError());\n        this.emit('disconnect');\n      }\n    };\n    this._connecting = false;\n    this._wallet = null;\n    this._publicKey = null;\n    if (this._readyState !== WalletReadyState.Unsupported) {\n      scopePollingDetectionStrategy(() => {\n        if (window.huobiWallet?.isHuobiWallet) {\n          this._readyState = WalletReadyState.Installed;\n          this.emit('readyStateChange', this._readyState);\n          return true;\n        }\n        return false;\n      });\n    }\n  }\n  get publicKey() {\n    return this._publicKey;\n  }\n  get connecting() {\n    return this._connecting;\n  }\n  get connected() {\n    return !!this._wallet?.isConnected;\n  }\n  get readyState() {\n    return this._readyState;\n  }\n  async connect() {\n    try {\n      if (this.connected || this.connecting) return;\n      if (this._readyState !== WalletReadyState.Installed) throw new WalletNotReadyError();\n      this._connecting = true;\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n      const wallet = window.huobiWallet;\n      try {\n        await wallet.connect();\n      } catch (error) {\n        throw new WalletConnectionError(error?.message, error);\n      }\n      if (!wallet.publicKey) throw new WalletAccountError();\n      let publicKey;\n      try {\n        publicKey = new PublicKey(wallet.publicKey.toBytes());\n      } catch (error) {\n        throw new WalletPublicKeyError(error?.message, error);\n      }\n      wallet.on('disconnect', this._disconnected);\n      this._wallet = wallet;\n      this._publicKey = publicKey;\n      this.emit('connect', publicKey);\n    } catch (error) {\n      this.emit('error', error);\n      throw error;\n    } finally {\n      this._connecting = false;\n    }\n  }\n  async disconnect() {\n    const wallet = this._wallet;\n    if (wallet) {\n      wallet.off('disconnect', this._disconnected);\n      this._wallet = null;\n      this._publicKey = null;\n      this.emit('disconnect');\n    }\n  }\n  async signTransaction(transaction) {\n    try {\n      const wallet = this._wallet;\n      if (!wallet) throw new WalletNotConnectedError();\n      try {\n        return (await wallet.signTransaction(transaction)) || transaction;\n      } catch (error) {\n        throw new WalletSignTransactionError(error?.message, error);\n      }\n    } catch (error) {\n      this.emit('error', error);\n      throw error;\n    }\n  }\n  async signAllTransactions(transactions) {\n    try {\n      const wallet = this._wallet;\n      if (!wallet) throw new WalletNotConnectedError();\n      try {\n        return (await wallet.signAllTransactions(transactions)) || transactions;\n      } catch (error) {\n        throw new WalletSignTransactionError(error?.message, error);\n      }\n    } catch (error) {\n      this.emit('error', error);\n      throw error;\n    }\n  }\n  async signMessage(message) {\n    try {\n      const wallet = this._wallet;\n      if (!wallet) throw new WalletNotConnectedError();\n      try {\n        const {\n          signature\n        } = await wallet.signMessage(message);\n        return signature;\n      } catch (error) {\n        throw new WalletSignMessageError(error?.message, error);\n      }\n    } catch (error) {\n      this.emit('error', error);\n      throw error;\n    }\n  }\n}","map":{"version":3,"mappings":"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","names":["BaseMessageSignerWalletAdapter","scopePollingDetectionStrategy","WalletAccountError","WalletConnectionError","WalletDisconnectedError","WalletNotConnectedError","WalletNotReadyError","WalletPublicKeyError","WalletReadyState","WalletSignMessageError","WalletSignTransactionError","PublicKey","HuobiWalletName","HuobiWalletAdapter","constructor","config","window","document","Unsupported","NotDetected","wallet","_wallet","off","_disconnected","_publicKey","emit","_connecting","_readyState","huobiWallet","isHuobiWallet","Installed","publicKey","connecting","connected","isConnected","readyState","connect","error","message","toBytes","on","disconnect","signTransaction","transaction","signAllTransactions","transactions","signMessage","signature"],"sourceRoot":"","sources":["../../src/adapter.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module","externalDependencies":[]}