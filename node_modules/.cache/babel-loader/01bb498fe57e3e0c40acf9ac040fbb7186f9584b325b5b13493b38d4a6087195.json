{"ast":null,"code":"import { BaseSignerWalletAdapter, WalletAdapterNetwork, WalletConnectionError, WalletDisconnectedError, WalletDisconnectionError, WalletLoadError, WalletNotConnectedError, WalletNotReadyError, WalletReadyState, WalletSignMessageError, WalletSignTransactionError, WalletWindowClosedError } from '@solana/wallet-adapter-base';\nexport const WalletConnectWalletName = 'WalletConnect';\nexport class WalletConnectWalletAdapter extends BaseSignerWalletAdapter {\n  constructor(config) {\n    super();\n    this.name = WalletConnectWalletName;\n    this.url = 'https://walletconnect.org';\n    this.icon = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJtNjEuNDM4NTQsOTQuMDAzOGM0OC45MTEyMywtNDcuODg4MTcgMTI4LjIxMTk5LC00Ny44ODgxNyAxNzcuMTIzMjEsMGw1Ljg4NjU1LDUuNzYzNDJjMi40NDU1NiwyLjM5NDQxIDIuNDQ1NTYsNi4yNzY1MSAwLDguNjcwOTJsLTIwLjEzNjcsMTkuNzE1NWMtMS4yMjI3OCwxLjE5NzIxIC0zLjIwNTMsMS4xOTcyMSAtNC40MjgwOCwwbC04LjEwMDU4LC03LjkzMTE1Yy0zNC4xMjE2OSwtMzMuNDA3OTggLTg5LjQ0Mzg5LC0zMy40MDc5OCAtMTIzLjU2NTU4LDBsLTguNjc1MDYsOC40OTM2MWMtMS4yMjI3OCwxLjE5NzIgLTMuMjA1MywxLjE5NzIgLTQuNDI4MDgsMGwtMjAuMTM2NjksLTE5LjcxNTVjLTIuNDQ1NTYsLTIuMzk0NDEgLTIuNDQ1NTYsLTYuMjc2NTIgMCwtOC42NzA5Mmw2LjQ2MTAxLC02LjMyNTg4em0yMTguNzY3OCw0MC43NzM3NWwxNy45MjE3LDE3LjU0Njg5YzIuNDQ1NTQsMi4zOTQ0IDIuNDQ1NTYsNi4yNzY0OCAwLjAwMDAzLDguNjcwODlsLTgwLjgxMDE3LDc5LjEyMTE0Yy0yLjQ0NTU1LDIuMzk0NDIgLTYuNDEwNTksMi4zOTQ0NSAtOC44NTYxNiwwLjAwMDA2Yy0wLjAwMDAxLC0wLjAwMDAxIC0wLjAwMDAzLC0wLjAwMDAyIC0wLjAwMDA0LC0wLjAwMDAzbC01Ny4zNTQxNCwtNTYuMTU0NThjLTAuNjExMzksLTAuNTk4NiAtMS42MDI2NSwtMC41OTg2IC0yLjIxNDA0LDBjMCwwLjAwMDAxIC0wLjAwMDAxLDAuMDAwMDEgLTAuMDAwMDEsMC4wMDAwMmwtNTcuMzUyOTIsNTYuMTU0NTNjLTIuNDQ1NTQsMi4zOTQ0MyAtNi40MTA1OCwyLjM5NDQ3IC04Ljg1NjE2LDAuMDAwMDhjLTAuMDAwMDIsLTAuMDAwMDEgLTAuMDAwMDMsLTAuMDAwMDIgLTAuMDAwMDUsLTAuMDAwMDRsLTgwLjgxMjQyLC03OS4xMjIxOWMtMi40NDU1NiwtMi4zOTQ0IC0yLjQ0NTU2LC02LjI3NjUxIDAsLTguNjcwOTFsMTcuOTIxNzMsLTE3LjU0Njg3YzIuNDQ1NTYsLTIuMzk0NDEgNi40MTA2LC0yLjM5NDQxIDguODU2MTYsMGw1Ny4zNTQ5OCw1Ni4xNTUzNWMwLjYxMTM5LDAuNTk4NjEgMS42MDI2NSwwLjU5ODYxIDIuMjE0MDQsMGMwLjAwMDAxLDAgMC4wMDAwMiwtMC4wMDAwMSAwLjAwMDAzLC0wLjAwMDAybDU3LjM1MjEsLTU2LjE1NTMzYzIuNDQ1NSwtMi4zOTQ0NyA2LjQxMDU0LC0yLjM5NDU2IDguODU2MTYsLTAuMDAwMmMwLjAwMDAzLDAuMDAwMDMgMC4wMDAwNywwLjAwMDA3IDAuMDAwMSwwLjAwMDFsNTcuMzU0OSw1Ni4xNTU0M2MwLjYxMTM5LDAuNTk4NiAxLjYwMjY1LDAuNTk4NiAyLjIxNDA0LDBsNTcuMzUzOTgsLTU2LjE1NDMyYzIuNDQ1NTYsLTIuMzk0NDEgNi40MTA2LC0yLjM5NDQxIDguODU2MTYsMHoiIGZpbGw9IiMzYjk5ZmMiIGlkPSJzdmdfMSIvPjwvc3ZnPg==';\n    this.supportedTransactionVersions = null;\n    this._readyState = typeof window === 'undefined' ? WalletReadyState.Unsupported : WalletReadyState.Loadable;\n    this._disconnected = () => {\n      const wallet = this._wallet;\n      if (wallet) {\n        wallet.client.off('session_delete', this._disconnected);\n        this._wallet = null;\n        this._publicKey = null;\n        this.emit('error', new WalletDisconnectedError());\n        this.emit('disconnect');\n      }\n    };\n    this._publicKey = null;\n    this._connecting = false;\n    this._wallet = null;\n    this._config = config;\n  }\n  get publicKey() {\n    return this._publicKey;\n  }\n  get connecting() {\n    return this._connecting;\n  }\n  get readyState() {\n    return this._readyState;\n  }\n  async connect() {\n    try {\n      if (this.connected || this.connecting) return;\n      if (this._readyState !== WalletReadyState.Loadable) throw new WalletNotReadyError();\n      this._connecting = true;\n      let WalletConnectClass;\n      let WCChainID;\n      try {\n        ({\n          WalletConnectWallet: WalletConnectClass,\n          WalletConnectChainID: WCChainID\n        } = await import('@jnwng/walletconnect-solana'));\n      } catch (error) {\n        throw new WalletLoadError(error?.message, error);\n      }\n      let wallet;\n      let publicKey;\n      try {\n        wallet = new WalletConnectClass({\n          network: this._config.network === WalletAdapterNetwork.Mainnet ? WCChainID.Mainnet : WCChainID.Devnet,\n          options: this._config.options\n        });\n        ({\n          publicKey\n        } = await wallet.connect());\n      } catch (error) {\n        if (error.constructor.name === 'QRCodeModalError') throw new WalletWindowClosedError();\n        throw new WalletConnectionError(error?.message, error);\n      }\n      wallet.client.on('session_delete', this._disconnected);\n      this._wallet = wallet;\n      this._publicKey = publicKey;\n      this.emit('connect', publicKey);\n    } catch (error) {\n      this.emit('error', error);\n      throw error;\n    } finally {\n      this._connecting = false;\n    }\n  }\n  async disconnect() {\n    const wallet = this._wallet;\n    if (wallet) {\n      wallet.client.off('session_delete', this._disconnected);\n      this._wallet = null;\n      this._publicKey = null;\n      try {\n        await wallet.disconnect();\n      } catch (error) {\n        this.emit('error', new WalletDisconnectionError(error?.message, error));\n      }\n    }\n    this.emit('disconnect');\n  }\n  async signTransaction(transaction) {\n    try {\n      const wallet = this._wallet;\n      if (!wallet) throw new WalletNotConnectedError();\n      try {\n        return await wallet.signTransaction(transaction);\n      } catch (error) {\n        throw new WalletSignTransactionError(error?.message, error);\n      }\n    } catch (error) {\n      this.emit('error', error);\n      throw error;\n    }\n  }\n  async signMessage(message) {\n    try {\n      const wallet = this._wallet;\n      if (!wallet) throw new WalletNotConnectedError();\n      try {\n        return await wallet.signMessage(message);\n      } catch (error) {\n        throw new WalletSignMessageError(error?.message, error);\n      }\n    } catch (error) {\n      this.emit('error', error);\n      throw error;\n    }\n  }\n}","map":{"version":3,"mappings":"AAMA,SACIA,uBAAuB,EACvBC,oBAAoB,EACpBC,qBAAqB,EACrBC,uBAAuB,EACvBC,wBAAwB,EACxBC,eAAe,EACfC,uBAAuB,EACvBC,mBAAmB,EACnBC,gBAAgB,EAChBC,sBAAsB,EACtBC,0BAA0B,EAC1BC,uBAAuB,QACpB,6BAA6B;AAGpC,OAAO,MAAMC,uBAAuB,GAAG,eAA8C;AAMrF,OAAM,MAAOC,0BAA2B,SAAQb,uBAAuB;EAcnEc,YAAYC,MAAwC;IAChD,KAAK,EAAE;IAdX,SAAI,GAAGH,uBAAuB;IAC9B,QAAG,GAAG,2BAA2B;IACjC,SAAI,GACA,43DAA43D;IACv3D,iCAA4B,GAAG,IAAI;IAMpC,gBAAW,GACf,OAAOI,MAAM,KAAK,WAAW,GAAGR,gBAAgB,CAACS,WAAW,GAAGT,gBAAgB,CAACU,QAAQ;IAuHpF,kBAAa,GAAG,MAAK;MACzB,MAAMC,MAAM,GAAG,IAAI,CAACC,OAAO;MAC3B,IAAID,MAAM,EAAE;QACRA,MAAM,CAACE,MAAM,CAACC,GAAG,CAAC,gBAAgB,EAAE,IAAI,CAACC,aAAa,CAAC;QAEvD,IAAI,CAACH,OAAO,GAAG,IAAI;QACnB,IAAI,CAACI,UAAU,GAAG,IAAI;QAEtB,IAAI,CAACC,IAAI,CAAC,OAAO,EAAE,IAAItB,uBAAuB,EAAE,CAAC;QACjD,IAAI,CAACsB,IAAI,CAAC,YAAY,CAAC;;IAE/B,CAAC;IA7HG,IAAI,CAACD,UAAU,GAAG,IAAI;IACtB,IAAI,CAACE,WAAW,GAAG,KAAK;IACxB,IAAI,CAACN,OAAO,GAAG,IAAI;IACnB,IAAI,CAACO,OAAO,GAAGZ,MAAM;EACzB;EAEA,IAAIa,SAAS;IACT,OAAO,IAAI,CAACJ,UAAU;EAC1B;EAEA,IAAIK,UAAU;IACV,OAAO,IAAI,CAACH,WAAW;EAC3B;EAEA,IAAII,UAAU;IACV,OAAO,IAAI,CAACC,WAAW;EAC3B;EAEA,MAAMC,OAAO;IACT,IAAI;MACA,IAAI,IAAI,CAACC,SAAS,IAAI,IAAI,CAACJ,UAAU,EAAE;MACvC,IAAI,IAAI,CAACE,WAAW,KAAKvB,gBAAgB,CAACU,QAAQ,EAAE,MAAM,IAAIX,mBAAmB,EAAE;MAEnF,IAAI,CAACmB,WAAW,GAAG,IAAI;MAEvB,IAAIQ,kBAA8C;MAClD,IAAIC,SAAsC;MAC1C,IAAI;QACA,CAAC;UAAEC,mBAAmB,EAAEF,kBAAkB;UAAEG,oBAAoB,EAAEF;QAAS,CAAE,GAAG,MAAM,MAAM,CACxF,6BAA6B,CAChC;OACJ,CAAC,OAAOG,KAAU,EAAE;QACjB,MAAM,IAAIjC,eAAe,CAACiC,KAAK,EAAEC,OAAO,EAAED,KAAK,CAAC;;MAGpD,IAAInB,MAA2B;MAC/B,IAAIS,SAAoB;MACxB,IAAI;QACAT,MAAM,GAAG,IAAIe,kBAAkB,CAAC;UAC5BM,OAAO,EACH,IAAI,CAACb,OAAO,CAACa,OAAO,KAAKvC,oBAAoB,CAACwC,OAAO,GAAGN,SAAS,CAACM,OAAO,GAAGN,SAAS,CAACO,MAAM;UAChGC,OAAO,EAAE,IAAI,CAAChB,OAAO,CAACgB;SACzB,CAAC;QAEF,CAAC;UAAEf;QAAS,CAAE,GAAG,MAAMT,MAAM,CAACa,OAAO,EAAE;OAC1C,CAAC,OAAOM,KAAU,EAAE;QACjB,IAAIA,KAAK,CAACxB,WAAW,CAAC8B,IAAI,KAAK,kBAAkB,EAAE,MAAM,IAAIjC,uBAAuB,EAAE;QACtF,MAAM,IAAIT,qBAAqB,CAACoC,KAAK,EAAEC,OAAO,EAAED,KAAK,CAAC;;MAG1DnB,MAAM,CAACE,MAAM,CAACwB,EAAE,CAAC,gBAAgB,EAAE,IAAI,CAACtB,aAAa,CAAC;MAEtD,IAAI,CAACH,OAAO,GAAGD,MAAM;MACrB,IAAI,CAACK,UAAU,GAAGI,SAAS;MAE3B,IAAI,CAACH,IAAI,CAAC,SAAS,EAAEG,SAAS,CAAC;KAClC,CAAC,OAAOU,KAAU,EAAE;MACjB,IAAI,CAACb,IAAI,CAAC,OAAO,EAAEa,KAAK,CAAC;MACzB,MAAMA,KAAK;KACd,SAAS;MACN,IAAI,CAACZ,WAAW,GAAG,KAAK;;EAEhC;EAEA,MAAMoB,UAAU;IACZ,MAAM3B,MAAM,GAAG,IAAI,CAACC,OAAO;IAC3B,IAAID,MAAM,EAAE;MACRA,MAAM,CAACE,MAAM,CAACC,GAAG,CAAC,gBAAgB,EAAE,IAAI,CAACC,aAAa,CAAC;MAEvD,IAAI,CAACH,OAAO,GAAG,IAAI;MACnB,IAAI,CAACI,UAAU,GAAG,IAAI;MAEtB,IAAI;QACA,MAAML,MAAM,CAAC2B,UAAU,EAAE;OAC5B,CAAC,OAAOR,KAAU,EAAE;QACjB,IAAI,CAACb,IAAI,CAAC,OAAO,EAAE,IAAIrB,wBAAwB,CAACkC,KAAK,EAAEC,OAAO,EAAED,KAAK,CAAC,CAAC;;;IAI/E,IAAI,CAACb,IAAI,CAAC,YAAY,CAAC;EAC3B;EAEA,MAAMsB,eAAe,CAAwBC,WAAc;IACvD,IAAI;MACA,MAAM7B,MAAM,GAAG,IAAI,CAACC,OAAO;MAC3B,IAAI,CAACD,MAAM,EAAE,MAAM,IAAIb,uBAAuB,EAAE;MAEhD,IAAI;QACA,OAAQ,MAAMa,MAAM,CAAC4B,eAAe,CAACC,WAAW,CAAC;OACpD,CAAC,OAAOV,KAAU,EAAE;QACjB,MAAM,IAAI5B,0BAA0B,CAAC4B,KAAK,EAAEC,OAAO,EAAED,KAAK,CAAC;;KAElE,CAAC,OAAOA,KAAU,EAAE;MACjB,IAAI,CAACb,IAAI,CAAC,OAAO,EAAEa,KAAK,CAAC;MACzB,MAAMA,KAAK;;EAEnB;EAEA,MAAMW,WAAW,CAACV,OAAmB;IACjC,IAAI;MACA,MAAMpB,MAAM,GAAG,IAAI,CAACC,OAAO;MAC3B,IAAI,CAACD,MAAM,EAAE,MAAM,IAAIb,uBAAuB,EAAE;MAEhD,IAAI;QACA,OAAO,MAAMa,MAAM,CAAC8B,WAAW,CAACV,OAAO,CAAC;OAC3C,CAAC,OAAOD,KAAU,EAAE;QACjB,MAAM,IAAI7B,sBAAsB,CAAC6B,KAAK,EAAEC,OAAO,EAAED,KAAK,CAAC;;KAE9D,CAAC,OAAOA,KAAU,EAAE;MACjB,IAAI,CAACb,IAAI,CAAC,OAAO,EAAEa,KAAK,CAAC;MACzB,MAAMA,KAAK;;EAEnB","names":["BaseSignerWalletAdapter","WalletAdapterNetwork","WalletConnectionError","WalletDisconnectedError","WalletDisconnectionError","WalletLoadError","WalletNotConnectedError","WalletNotReadyError","WalletReadyState","WalletSignMessageError","WalletSignTransactionError","WalletWindowClosedError","WalletConnectWalletName","WalletConnectWalletAdapter","constructor","config","window","Unsupported","Loadable","wallet","_wallet","client","off","_disconnected","_publicKey","emit","_connecting","_config","publicKey","connecting","readyState","_readyState","connect","connected","WalletConnectClass","WCChainID","WalletConnectWallet","WalletConnectChainID","error","message","network","Mainnet","Devnet","options","name","on","disconnect","signTransaction","transaction","signMessage"],"sourceRoot":"","sources":["../../src/adapter.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module","externalDependencies":[]}